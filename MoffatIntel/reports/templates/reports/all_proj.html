{% extends "reports/base.html" %}

{% block title %}All Projects{% endblock %}

{% load static %}

{% block content %}
<script src="{% static 'reports/deleteConfirm.js' %}"></script>
<h2 class="section-header">All Projects</h2>
<div class="add-new">
    <a href="/reports/create_proj/">+ Create Project</a>
</div>

{% if projects %}
    <div class="reports-list-div">
        <table width="98%" height="98%" align="center" cellpadding="10" border="0">
            <tr class="report-item headers">
                <th>Name</th>
                <th>Address</th>
                <th>Status</th>
                <th>Edited By</th>
                <th>Last Edited</th>
            </tr>
        {% for project in projects %}
                <tr class="report-item zebra">
                    <td><a href="{% url 'reports:project_view' project.id %}">{{ project.name }}</a></td>
                    <td><a href="{% url 'reports:project_view' project.id %}">{{ project.address }}</a></td>
                     <td><a href="{% url 'reports:project_view' project.id %}">{{ project.get_status_display_long }}</a></td>
                    <td><a href="{% url 'reports:project_view' project.id %}">{{ project.edited_by }}</a></td>
                    <td><a href="{% url 'reports:project_view' project.id %}">{{ project.last_edit_date }}</a></td>
                    <td width="5%" class="inline-edit-button"><a href="{% url 'reports:edit_proj' project.id %}"><img src="{% static 'reports/images/pencil.png' %}" height="15px" width="auto">Edit</a></td>
                    <td width="6%">
                      <form id="delete-form" method="post" data-delete-url="{% url 'reports:delete_proj' project.id%}">
                        {% csrf_token %}
                        <input type="hidden" name="project_id" value="{{ project.id }}">
                        <input type="hidden" name="username" id="username">
                        <button class="inline-delete-button" type="button" onclick="deleteConfirmation(this)">
                          <img src="{% static 'reports/images/trash.png' %}" height="10px" width="auto"> Delete
                        </button>
                      </form>
                    </td>
                </tr>

        {% endfor %}
        </table>
    </div>
{% else %}
    <div class="reports-list-div">
        <table>
            <tr class="report-item zebra">
                <td>There are currently no projects available.</td>
            </tr>
        </table>
    </div>

{% endif %}

</table>

{% endblock %}
