{% extends "reports/base.html" %}

{% block title %}Edit Invoice{% endblock %}

{% block content %}
    <form action="{% url 'reports:edit_invoice' project.id draw.id invoice.id%}" enctype="multipart/form-data" method="post">
        {% csrf_token %}
        <fieldset class="fieldset" style="margin-left: 150px; margin-right: 150px">
            <legend><h1>Edit Invoice {{invoice.invoice_num}}</h1></legend>

            {% if error_message %}
                <p><strong class="error">{{ error_message }}</strong></p>
            {% endif %}

            <label for="invoice_date">Invoice Date:</label>
            <input type="date" name="invoice_date" id="invoice_date" class="input-field" value='{{invoice.invoice_date|date:"Y-m-d"}}'>

            <label for="invoice_num">Invoice Number:</label>
            <input type="text" name="invoice_num" id="invoice_num" class="input-field" value="{{invoice.invoice_num}}">

            <label for="division_code">Division Code:</label>
            <input type="text" name="division_code" id="division_code" class="input-field" value="{{invoice.division_code}}">

            <label for="method">Method:</label>
            <select name="method" id="method" class="input-field">
                {% for choice in method_choices %}
                    <option value="{{ choice.0 }}">{{ choice.1 }}</option>
                {% endfor %}
                <option selected="selected">
                        {{invoice.get_method_display_long}}
                </option>
            </select>
            <br><br>
            <label for="sub">Subcontractor: </label>
            <select name="sub" id="sub" class="input-field">
                {% for sub in subs %}
                    <option value="{{ sub.name }}">{{ sub.name }}</option>
                {% endfor %}
                <option selected="selected">
                    {{invoice.sub.name}}
                </option>
            </select>

            <label for="invoice_total">Invoice Total: $</label>
            <input type="number" min="0" step=".01" name="invoice_total" id="invoice_total" value="{{invoice.invoice_total}}" class="input-field">

            <label for="lien_release_type">Lien Release Type: </label>
            <select name="lien_release_type" id="lien_release_type" class="input-field">
                {% for choice in lien_release_type_choices %}
                    <option value="{{ choice.0 }}">{{ choice.1 }}</option>
                {% endfor %}
                <option selected="selected">
                    {{invoice.get_LR_type_display_long}}
                </option>
            </select>

            <label for="w9">W9: </label>
            <input type="text" name="w9" id="w9" class="input-field" value="{{invoice.w9}}">
            <br><br>
            <label for="description">Description:</label>
            <input type="text" name="description" id="description" class="input-field" value="{{invoice.description}}" style="width: 800px">

            <br><br>
            <div class="form-field">
                <label style="position: relative">Invoice PDF: </label>
                <input type="file" name="invoice_pdf" id="invoice_pdf" class="input-field" value="{{invoice.invoice_pdf}}">
                {% if invoice.invoice_pdf %}
                    <p>Current file: {{invoice.invoice_pdf.name}}</p>
                {% endif %}
                <label style="position: relative">Lien Release PDF: </label>
                <input type="file" name="lien_release_pdf" id="lien_release_pdf" value="{{invoice.lien_release_pdf}}">
                {% if invoice.lien_release_pdf %}
                    <p>Current file: {{invoice.lien_release_pdf.name}}</p>
                {% endif %}
                <label for="signed" style="position: relative">Is Lien Release Signed? </label>
                <input type="checkbox" name="signed" id="signed">
            </div>


            <input class="input-field-save" type="submit" name="submit" value="Save">

        </fieldset>
    </form>
{% endblock %}
