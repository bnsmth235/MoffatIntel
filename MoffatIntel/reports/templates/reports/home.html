{% extends "reports/base.html" %}

{% block title %}MoffatIntel Home{% endblock %}

{% block content %}
{% load static %}
<script src="{% static 'reports/deleteConfirm.js' %}"></script>
<h2 style="margin-left: 45px; margin-bottom: -12px;">Recent Projects</h2>
<div style="float: right; margin-top: -15px; padding: 6px; margin-right: 31px; border-radius:8px; border: 2px solid #7c0300; background-color: #7c0300">
    <a href="/reports/create_proj/" style="text-decoration: none; color: white;  font-size: 18px; font-weight: 300">+ Create Project</a>
</div>

{% if recent_projects %}
    <div class="reports-list-div">
        <table width="98%" height="98%" align="center" cellpadding="10" border="0">
            <tr class="report-item headers no-hover" style="background-color: initial;">
                <th>Name</th>
                <th>Address</th>
                <th>Status</th>
                <th>Edited By</th>
                <th>Last Edited</th>
            </tr>

            {% for project in recent_projects %}

                <tr class="report-item zebra">
                    <td><a href="{% url 'reports:project_view' project.id %}" style="">{{ project.name }}</a></td>
                    <td><a href="{% url 'reports:project_view' project.id %}">{{ project.address }}</a></td>
                     <td><a href="{% url 'reports:project_view' project.id %}">{{ project.get_status_display_long }}</a></td>
                    <td><a href="{% url 'reports:project_view' project.id %}">{{ project.edited_by }}</a></td>
                    <td><a href="{% url 'reports:project_view' project.id %}">{{ project.last_edit_date }}</a></td>
                    <td><a href="{% url 'reports:edit_proj' project.id %}"><img src="{% static 'reports/images/pencil.png' %}" height="10px" width="auto"> Edit</a></td>
                    <td>
                      <form id="delete-form" method="post" data-delete-url="{% url 'reports:delete_proj' project.id%}">
                        {% csrf_token %}
                        <input type="hidden" name="project_id" value="{{ project.id }}">
                        <input type="hidden" name="username" id="username">
                        <button style="color: black; border:none; background-color: transparent; font-family: inherit; font-size: inherit; cursor: pointer" type="button" onclick="deleteConfirmation(this)">
                          <img src="{% static 'reports/images/trash.png' %}" height="10px" width="auto"> Delete
                        </button>
                      </form>
                    </td>

</tr>
        {% endfor %}
        </table>
    </div>
{% else %}
    <div class="reports-list-div">
        <table>
            <tr class="report-item no-hover">
                <td>There are currently no projects available.</td>
            </tr>
        </table>
    </div>

{% endif %}

</table>

<script>

</script>
{% endblock %}
